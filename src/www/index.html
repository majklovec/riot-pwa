<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>My Riot PWA</title>
    <link rel="icon" href="./assets/img/favicon.png" type="image/png" sizes="16x16">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="description" content="Simple Progressive Web App  By saurshaz Built With Riot Js">
    <!-- MANIFEST -->
    <link rel="manifest" href="./manifest.json">
    <!-- ADD TO HOMESCREEN SAFARI ON IOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Simple PWA">
    <link rel="apple-touch-icon" href="./assets/img/icon-152.png">
    <!-- ADD TO HOMESCREEN WINDOWS -->
    <meta name="msapplicatoin-TileImage" content="./assets/img/icon-144.png">
    <meta name="msapplicatoin-TileColor" content="#3d5165">
    <meta content="IE=edge" http-equiv="x-ua-compatible">
    <meta content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
</head>

<body style="overflow: auto;">
    <div class="m-scene" id="main">
        <div id="app"></div>
        <div id="blocking-loading" style="display:none;">
            <img src="http://prokriya.us/riot-pwa/src/www/assets/img/loader.gif" style="position:absolute;left:44%;top:44%;width:10%;background-color:blue;" />
        </div>
    </div>
    <script src="/main.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js')
                .then((registration) => {
                    // Registration was successful
                    console.log('ServiceWorker registration successful with scope: ', registration.scope)
                    var newWorker = registration.installing           
                    // statechange fires every time the ServiceWorker.state changes
                    newWorker.onstatechange = function() {
                      // show the message on activation
                      if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {
                        document.querySelector(".offline-ready").classList.add("active");
                      }
                    };
                }, (err) => {
                      // registration failed :(
                  console.log('ServiceWorker registration failed: ', err)
                })
                .catch((err) => {
                  console.log(err)
                })
          })
        } else {
          console.log('service worker is not supported')
        }

</script>

  <script type="text/javascript">
        var notify
        Notification.requestPermission().then((p) => {
          if (p === 'denied') {
            alert('You have Denied Notifications.')
          } else if (p === 'granted') {
            alert('You have granted Notifications.')
            notify = new Notification('Joker Says', {
              body: 'This is auto generated message',
              icon: 'http://www.gorillatshirts.co.uk//image/cache/data/template01/black/2581-192x192.jpg',
              tag: 'Notification'
            })
          }
        })

        if (Notification.permission === 'default') {
          alert('please allow Notifications')
        } else {
          notify = new Notification('Joker Says', {
            body: 'HA HA HA Ha',
            icon: 'http://www.gorillatshirts.co.uk//image/cache/data/template01/black/2581-192x192.jpg',
            tag: 'Notification'
          })
          setTimeout(notify.close.bind(notify), 4000)
        }
    </script>
    <script type="/src/www/addtohomescreen.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script>
    <script src="/src/www/config.js"></script>
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
    <script>
        (
            function (i, s, o, g, r, a, m) {
              i['GoogleAnalyticsObject'] = r
              i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
              }, i[r].l = 1 * new Date()
              a = s.createElement(o),
              m = s.getElementsByTagName(o)[0]
              a.async = 1
              a.src = g
              m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga')
        ga ('create', 'UA-CCCC-2', 'auto')
    </script>
</body>

</html>
